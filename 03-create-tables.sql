CREATE TABLE IF NOT EXISTS USER(ID INT UNSIGNED NOT NULL AUTO_INCREMENT,FIRST_NAME VARCHAR(45)  NOT NULL,LAST_NAME VARCHAR(45)  NOT NULL,BIRTH_DATE date  NOT NULL,PASSPORT VARCHAR(100)  NOT NULL,ADDRESS VARCHAR(100)  NOT NULL,EMAIL VARCHAR(100)  NOT NULL,PASSWORD VARCHAR(255)  NOT NULL,ROLE VARCHAR(45)  NOT NULL, PRIMARY KEY (`ID`), UNIQUE INDEX `USER_EMAIL_unique` (`EMAIL`));

CREATE TABLE IF NOT EXISTS TARIFF(ID INT UNSIGNED NOT NULL AUTO_INCREMENT,NAME VARCHAR(45)  NOT NULL,PRICE double  NOT NULL,INFO VARCHAR(100)  NOT NULL, PRIMARY KEY (`ID`));

CREATE TABLE IF NOT EXISTS CONTRACT(ID INT UNSIGNED NOT NULL AUTO_INCREMENT,USER_ID INT UNSIGNED NOT NULL,TARIFF_ID INT UNSIGNED NOT NULL,PHONE_NUMBER VARCHAR(45)  NOT NULL,BALANCE double  NOT NULL,BLOCKED VARCHAR(45)  NOT NULL, PRIMARY KEY (`ID`), INDEX `CONTRACT_USER_ID_foreign` (`USER_ID`), CONSTRAINT `CONTRACT_USER_ID_foreign` FOREIGN KEY (`USER_ID`) REFERENCES `USER` (`ID`), INDEX `CONTRACT_TARIFF_ID_foreign` (`TARIFF_ID`), CONSTRAINT `CONTRACT_TARIFF_ID_foreign` FOREIGN KEY (`TARIFF_ID`) REFERENCES `TARIFF` (`ID`), UNIQUE INDEX `CONTRACT_PHONE_NUMBER_unique` (`PHONE_NUMBER`));

CREATE TABLE IF NOT EXISTS TARIFF_OPTION(ID INT UNSIGNED NOT NULL AUTO_INCREMENT,TARIFF_ID INT UNSIGNED NOT NULL,NAME VARCHAR(45)  NOT NULL,PRICE double  NOT NULL,CONNECTION_PRICE double  NOT NULL,INFO VARCHAR(100)  NOT NULL, PRIMARY KEY (`ID`), INDEX `TARIFF_OPTION_TARIFF_ID_foreign` (`TARIFF_ID`), CONSTRAINT `TARIFF_OPTION_TARIFF_ID_foreign` FOREIGN KEY (`TARIFF_ID`) REFERENCES `TARIFF` (`ID`));

CREATE TABLE IF NOT EXISTS INCOMPATIBLE_OPTIONS(FIRST_TARIFF_OPTION_ID INT UNSIGNED NOT NULL,SECOND_TARIFF_OPTION_ID INT UNSIGNED NOT NULL, INDEX `INCOMPATIBLE_OPTIONS_FIRST_TARIFF_OPTION_ID_foreign` (`FIRST_TARIFF_OPTION_ID`), CONSTRAINT `INCOMPATIBLE_OPTIONS_FIRST_TARIFF_OPTION_ID_foreign` FOREIGN KEY (`FIRST_TARIFF_OPTION_ID`) REFERENCES `TARIFF_OPTION` (`ID`), INDEX `INCOMPATIBLE_OPTIONS_SECOND_TARIFF_OPTION_ID_foreign` (`SECOND_TARIFF_OPTION_ID`), CONSTRAINT `INCOMPATIBLE_OPTIONS_SECOND_TARIFF_OPTION_ID_foreign` FOREIGN KEY (`SECOND_TARIFF_OPTION_ID`) REFERENCES `TARIFF_OPTION` (`ID`));

CREATE TABLE IF NOT EXISTS REQUIRED_OPTIONS(FIRST_TARIFF_OPTION_ID INT UNSIGNED NOT NULL,SECOND_TARIFF_OPTION_ID INT UNSIGNED NOT NULL, INDEX `REQUIRED_OPTIONS_FIRST_TARIFF_OPTION_ID_foreign` (`FIRST_TARIFF_OPTION_ID`), CONSTRAINT `REQUIRED_OPTIONS_FIRST_TARIFF_OPTION_ID_foreign` FOREIGN KEY (`FIRST_TARIFF_OPTION_ID`) REFERENCES `TARIFF_OPTION` (`ID`), INDEX `REQUIRED_OPTIONS_SECOND_TARIFF_OPTION_ID_foreign` (`SECOND_TARIFF_OPTION_ID`), CONSTRAINT `REQUIRED_OPTIONS_SECOND_TARIFF_OPTION_ID_foreign` FOREIGN KEY (`SECOND_TARIFF_OPTION_ID`) REFERENCES `TARIFF_OPTION` (`ID`));

CREATE TABLE IF NOT EXISTS CONTRACT_OPTIONS(CONTRACT_ID INT UNSIGNED NOT NULL,OPTION_ID INT UNSIGNED NOT NULL, INDEX `CONTRACT_OPTIONS_CONTRACT_ID_foreign` (`CONTRACT_ID`), CONSTRAINT `CONTRACT_OPTIONS_CONTRACT_ID_foreign` FOREIGN KEY (`CONTRACT_ID`) REFERENCES `CONTRACT` (`ID`), INDEX `CONTRACT_OPTIONS_OPTION_ID_foreign` (`OPTION_ID`), CONSTRAINT `CONTRACT_OPTIONS_OPTION_ID_foreign` FOREIGN KEY (`OPTION_ID`) REFERENCES `TARIFF_OPTION` (`ID`));

